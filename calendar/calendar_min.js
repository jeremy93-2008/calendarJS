function Cargar(a){var b=document.getElementById("calendario")||-1;b==-1&&(clase=a,CrearCalendario(),CrearFecha(),CrearDiasEncabezados(),RellenarTabla())}function Anterior(){0===meses?(meses=11,edad--):meses--,CrearFecha(meses,edad),EliminarContenido(),CrearDiasEncabezados(),RellenarTabla()}function Siguiente(){11===meses?(meses=0,edad++):meses++,CrearFecha(meses,edad),EliminarContenido(),CrearDiasEncabezados(),RellenarTabla()}function Load(){fecha=new Date;for(var a=document.getElementsByClassName("calendar").length,b=0;b<a;b++){var c=document.getElementsByClassName("calendar")[b];c.onclick=function(){Cargar(this.className)},c.className.indexOf("-"+b+"-")==-1?c.className=c.className+" -"+b+"-":c.className=c.className;var d=fecha.getDate()+"/"+(fecha.getMonth()+1)+"/"+fecha.getFullYear();c.placeholder=d;c.readOnly = true;}}function CrearCalendario(){var a=document.createElement("div");a.setAttribute("id","calendario"),a.innerHTML="<div class='control'><button title='Anterior mes' onclick='Anterior()'><<</button> <h3 id='fecha'>Junio-2016</h3> <button title='Siguiente mes' onclick='Siguiente()'>>></button><button onclick='DelCalendar()' style='float: right;margin-top: 20px;margin-right: 20px;' title='Cerrar'>X</button></div><div id='tabla'></div>";var b=document.getElementsByClassName(clase)[0].value;document.getElementsByClassName(clase)[0].outerHTML+=a.outerHTML,document.getElementsByClassName(clase)[0].value=b}function CrearFecha(a,b){if(0===arguments.length){a=fecha.getMonth(),b=fecha.getFullYear(),mes_actual=a,anio_actual=b;var c=fecha.getDate();hoy=c;var d=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],e=d[a],f=b;console.log(f+"-"+a+"-01"),inicio_dia=new Date(f+"-"+a+"-01").getDay();var g=document.getElementById("fecha");g.replaceChild(document.createTextNode(e+" - "+f),g.childNodes[0])}else if(2===arguments.length){fecha=new Date(a+1+"/01/"+b);var c=fecha.getDate(),d=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],e=d[a],f=b;console.log(f+"-"+a+"-01"),inicio_dia=fecha.getDay()-2;var g=document.getElementById("fecha");g.replaceChild(document.createTextNode(e+" - "+f),g.childNodes[0])}meses=fecha.getMonth(),edad=fecha.getFullYear()}function CrearDiasEncabezados(){tabla=document.createElement("table"),tabla.setAttribute("class","tabla");for(var a=["Lu","Ma","Mi","Ju","Vi","Sa","Do"],b=document.createElement("tr"),c=0;c<7;c++){var d=document.createElement("th");d.appendChild(document.createTextNode(a[c])),b.appendChild(d)}tabla.appendChild(b)}function EliminarContenido(){var a=document.getElementById("calendario");a.removeChild(a.childNodes[1]);var b=document.createElement("div");b.setAttribute("id","tabla"),a.appendChild(b)}function RellenarTabla(){for(var a=document.getElementById("tabla"),b=[31,30,31,30,31,30,31,31,30,31,30,31],c=0,d=0;d<7;d++){for(var e=!1,f=document.createElement("tr"),g=0;g<7;g++)if(c<b[fecha.getMonth()]){var h=document.createElement("td");if(inicio_dia=inicio_dia===-2?5:inicio_dia,inicio_dia=inicio_dia===-1?6:inicio_dia,0===d&&g<=inicio_dia){var j=document.createElement("span");j.setAttribute("style","visibility:hidden;"),j.appendChild(document.createTextNode("5")),h.appendChild(j),f.appendChild(h)}else{e=!0,c++;var i=c+"/"+(fecha.getMonth()+1)+"/"+fecha.getFullYear();if(h.setAttribute("onclick","seleccionar('"+i+"')"),hoy==c&&fecha.getMonth()==mes_actual&&fecha.getFullYear()==anio_actual){var j=document.createTextNode("["+c+"]");h.setAttribute("style","text-align:center;color:red;font-weight:bold;cursor:pointer;"),h.appendChild(j),f.appendChild(h)}else if(1==fecha.getMonth()&&c<diabisiesto()+1){var j=document.createTextNode(c);h.setAttribute("style","text-align:center;cursor:pointer;"),h.appendChild(j),f.appendChild(h)}else if(1!=fecha.getMonth()){var j=document.createTextNode(c);h.setAttribute("style","text-align:center;cursor:pointer;"),h.appendChild(j),f.appendChild(h)}}}tabla.appendChild(f)}a.appendChild(tabla)}function seleccionar(a){var b=a.split("/");b[0]<10?b[0]="0"+b[0]:b[0]=b[0],b[1]<10?b[1]="0"+b[1]:b[1]=b[1];var c=b[2]+"-"+b[1]+"-"+b[0],d=clase.split("-")[1];document.getElementsByClassName("calendar")[d].value=c,DelCalendar()}function DelCalendar(){var a=document.getElementById("calendario");a.outerHTML="",Load()}function diabisiesto(){var a=28;return edad%4===0&&(a=29,edad%100===0&&(a=28,edad%400===0&&(a=29))),a}var fecha=new Date,inicio_dia,hoy,tabla,mes_actual,anio_actual,meses,edad,clase;window.onload=Load;